# Superhero Choice

- 사용 기술: Create React App, TypeScript, Sass(SCSS), React Router, React Query, Axios, Recoil, store-js, lodash, classnames, ESLint, Stylelint, Prettier

## 1. 구현된 과제 확인 방법

### Netlify로 배포된 페이지

🔗 [링크](https://random-superheroes.netlify.app/)

## 2. 폴더 구조

- 📁assets

  - 이미지 및 아이콘을 모아두는 폴더입니다.

- 📁components

  - 화면을 구성하는데에 있어 필요한 컴포넌트들을 모아둔 폴더입니다.
  - 페이지 전반적으로 사용될 수 있는 컴포넌트인 Spinner는 common 폴더에 넣어뒀습니다.
  - 그 외에 SNB와 HeroCard는 컴포넌트 규모가 크기 때문에 밖에 넣어뒀습니다.

- 📁hooks

  - Custom hooks를 모아둔 폴더입니다.
  - 이번 프로젝트에선 Recoil을 위한 `useRecoil`만 존재합니다.

- 📁layouts

  - 페이지 전체에 적용할 레이아웃을 넣은 폴더입니다.

- 📁pages

  - 라우터를 기준으로 각각의 페이지를 모아둔 폴더입니다.

- 📁states

  - Recoil과 관련된 파일들을 모아둔 폴더입니다.

- 📁styles

  - 전역 스타일링, 변수, mixins 등 전역에서 사용되는 스타일링 관련 파일들을 모아둔 폴더입니다.

- 📁types

  - 전역적으로 사용되는 타입을 모아둔 폴더입니다.

- 📁utils

  - 앱 전반적으로 사용되는 변수나 함수 등을 담아둔 폴더입니다.

## 3. 구현 방향성

- Airbnb 설정을 기반으로 한 기본적인 ESLint 설정을 하고 rules를 추가하여 린터를 엄격하게 설정하였씁니다.
- 필요한 라이브러리가 있다면 최대한 활용하되 작동 방식을 이해 하지 못한 상태로 무작정 사용하는 것은 지양하였습니다.
- 최소한의 반응형을 구현하고자 했습니다.

## 4. 구현 사항

초기 계획에는 두 영웅 중 한 명을 선택하여 통계를 내는 기능과 더불어, Firebase를 활용하여 사람들이 선택하는 영웅의 수 랭킹에 누적되어 나타나도록 구현하려 했었습니다. 또한 한번 등장했던 영웅은 다시 등장하지 않도록 함으로써 개인 별로 중복이 일어나지 않도록 구현하고, 영웅 별 상세 정보도 구현하려 했으나 시간이 부족했던 관계로 구현이 미흡한 상태입니다.

### 1) 페이지

#### Choice

무작위로 영웅이 등장하면 한 명을 선택하는 화면입니다. 영웅의 이미지, 이름, 그리고 능력치가 카드로 나타나며 둘 중 마음에 드는 영웅을 선택하면 됩니다. 이 곳에서 선택하는 영웅들은 로컬 스토리지에 그 횟수가 저장되었다가 이후 Rankings에서 몇 번 선택됐는지 확인할 수 있습니다. React Query의 cache와 stale을 활용하여 한번 fetch 되었던 영웅은 다시 fetch를 할 필요가 없도록 구현하였습니다. 또한 fetch가 이루어지는 동안 로딩 스피너(Spinner)가 출력됩니다.

#### Rankings

Choice에서 영웅들이 몇 번이 선택되었는 지 순위를 확인할 수 있는 화면입니다. 본래는 Firebase를 통해 많은 통계가 이루어졌어야 하지만, 우선은 로컬에서 구현을 해둔 상태입니다. 로컬 스토리지를 Firebase처럼 활용함으로써 로컬에서라도 통계를 확인해볼 수 있습니다. 여기에서도 React Query의 cache와 stale이 활용되어 choice에서 한 번이라도 fetch가 된 적이 있는 영욷들은 다시 fetch가 이루어지지 않아 출력이 빨리 됩니다.

## 5. 구현 상세 설명

구현 과정에서 가장 중요한 부분은 API 통신을 얼마나 효율적으로 할 수 있는지였습니다. 받아올 수 있는 영웅의 수가 700개가 넘어가기 때문에 불필요한 통신은 최소화 해야 했으며 700개의 영웅이 무작위로 나올 수 있도록 구현하는 것 또한 필요했습니다.

### utils/getHero.ts

React Query에서 사용되는 fetcher 함수입니다. heroId를 인자로 받아 해당 아이디에 해당하는 영웅의 정보를 받아옵니다. 보통 특정 영웅을 받아오는 용도로 사용되지만, 만약 heroId에 무작위의 숫자를 주면 무작위 영웅을 받아올 수 있을 것이라는 아이디어가 떠올라 활용하게 되었습니다.

### constants/randomId

무작위 영웅의 아이디를 생성하기 위해 1부터 731 사이의 무작위 숫자를 가져오는 함수입니다. 이 함수를 Choice 컴포넌트에서 import하여 무작위 수를 생성하고 props로 HeroCard에 전달해줌으로써 무작위 영웅 카드를 만들 수 있었습니다.

### 반응형 구현

카드 내에서 영웅의 이미지 및 텍스트의 가독성이 좋아야 한다고 생각했기 때문에 1024px를 기준으로 반응형을 구현하였습니다. 1024px 미만에선 카드 내 요소들이 수평 정렬이 되고 선택 화면은 수직 정렬이되며, 1024px 이상에선 카드 내 요소들이 수직 정렬이 되고 선택 화면은 수평 정렬이 됩니다. 이로써 작은 화면에서든 큰 화면에서든 문제 없이 이미지와 텍스트를 확인할 수 있습니다. 또한 Rankings의 경우 'display:grid'를 활용하여 화면이 1024px 미만일 때는 한 줄씩, 1024px 이상일 때는 3개의 열로 표현됩니다.

## 6. 어려웠던 점, 배운 점, 그리고 느낀 점

아이디어는 많았으나 시간이 충분치 않아 구현이 미흡한 점이 너무 아쉽습니다. 구상으로는 금방 구현할 수 있을 것이라고 생각했지만 막상 구현을 시작해 보니 React Query와 store가 상호 작용을 하도록 구현하는 부분에서 시간이 오래 걸렸습니다. 원하는 구현을 모두 해낸 것은 아니지만 이전에 했던 구현들은 익숙해졌다고 느꼈으며, 이번에 오래 걸린 부분에 대해서는 확실하게 공부가 되었기에 앞으로의 프로젝트에선 더 빠르게 진행할 수 있을 것 같습니다. 아이디어가 많았던 만큼 이 프로젝트는 꾸준히 수정하여 추가 기능과 Firebase 적용까지 할 예정입니다.
